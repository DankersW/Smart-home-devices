name: unit_test

on: [push]
  
  #push:
  #  branches-ignore:
  #    - '**'

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout branch
        uses: actions/checkout@v2

      - name: Install packages
        run: |
          sudo apt-get update
          sudo apt-get install cmake

      - name: PWD
        run: |
          pwd
          ls -l
          find -name "CMakelists.txt"

      - name: Build
        run: |
          cd smart-home-devices
          cmake .
          cmake --version
          ls -l
          mkdir build
          cd build
          pwd
          ls -l
          ls -l ..
          cmake ..
          make 
          make test

      - name: Run tests
        run: make test

    
